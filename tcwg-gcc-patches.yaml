- job:
    name: tcwg-gcc-patches
    project-type: freestyle
    defaults: global
    description: |
      This job tracks gcc-patches@ mailing list and tests
      interesting patches.
    properties:
        - authorization:
            anonymous:
                - job-read
                - job-extended-read
            linaro:
                - job-build
                - job-cancel
        - build-discarder:
            days-to-keep: 30
            num-to-keep: 30
    parameters:
        - string:
            name: patches
            default: 'last'
            description: 'List of patchworks patch ids (numbers); some of ids can be "last"'
        - string:
            name: gcc_branch
            default: 'master'
            description: 'GCC branch to apply patch to'
        - string:
            name: scripts_branch
            default: 'master'
            description: 'Branch to pull jenkins-script from'
    disabled: false
    node: tcwg-coordinator
    concurrent: false
    display-name: 'TCWG ZZZ Monitor gcc-patches@'
    scm:
        - git:
            url: http://git-us.linaro.org/toolchain/jenkins-scripts.git
            refspec: +refs/heads/*:refs/remotes/origin/* +refs/changes/*:refs/changes/*
            name: origin
            branches:
                - ${scripts_branch}
            basedir: jenkins-scripts
            skip-tag: true
            shallow-clone: true
            wipe-workspace: false
        - git:
            url: ssh://tcwg-buildslave@review.linaro.org:29418/toolchain/gcc.git
            refspec: +refs/heads/*:refs/remotes/origin/* +refs/changes/*:refs/changes/*
            # tcwg-buildslave user id
            credentials-id: 'e0958a95-204f-4c14-a66c-5e2be6c5d50a'
            name: origin
            branches:
                - ${gcc_branch}
            basedir: gcc
            skip-tag: true
            shallow-clone: false
            wipe-workspace: false
    wrappers:
        - timeout:
            timeout: 600
        - timestamps
        - build-name:
            name: '#${BUILD_NUMBER}'
    builders:
        - shell: |
            #!/bin/bash
            ./jenkins-scripts/tcwg-gcc-patches.sh
